<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>CFLIB - Flexible Configuration Library: Flexible Configuration Library - User Documentation</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">CFLIB - Flexible Configuration Library
   &#160;<span id="projectnumber">Patchlevel 21</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="index.html">CFLIB Flexible Configuration Library</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">Flexible Configuration Library - User Documentation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="intro"></a>
Introduction and General Issues</h2>
<p>CFLIB is a small, simple, flexible and portable ANSI C Library to be used as configuration interface for user programs. CFLIB builds and maintains a compact database structure consisting of a list of parameters with their name, content and some additional information about each parameter.</p>
<p>CFLIB targets the basic needs of technical, scientific or other programmers who want to spend minimal time on coding input, output, variable parsing, report generation and the like but still have a simple to use, reliable, flexible and portable configuration interface for their programs.</p>
<dl class="section user"><dt>Main Features:</b></dt><dd></dd></dl>
<ul>
<li>Commandline, environment and terminal input parsing<ul>
<li>Configuration files</li>
<li>File search</li>
<li>Template driven report generation</li>
<li>Automatic time and date update</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="project_homepage"></a>
Project Homepage</h2>
<p>The text you are reading is part of the User Documentation for the Flexible Configuration Library that supplements the library and its include file cf.h. More (detailed) information, source code and maybe updates are available from the library homepage:</p>
<ul>
<li><a href="http://cflib.berlios.de">http://cflib.berlios.de</a></li>
</ul>
<p>Anonymous (Read Only) SVN Checkout is supported!</p>
<h2><a class="anchor" id="basic_usage"></a>
Basic Usage</h2>
<ol type="1">
<li>Include cf.h</li>
</ol>
<ol type="1">
<li>Define the <a class="el" href="config_initializer.html">Configuration Initializer</a>, an array of CONFIG structures</li>
</ol>
<ol type="1">
<li>Call <a class="el" href="group__cflib__core.html#gae593ff607f853bd5fc16a16bb6759314" title="Initialize CFLIB Configuration Database and parse possible sources for database entries according to ...">cfinit()</a> with Configuration Initializer and Commandline. The most compact initialization is done by <a class="el" href="group__cflib__core.html#gadcf24d678203bd09a0a3e05b8a986c65" title="Setup Configuration Database.">cfstart()</a>, a wrapper function for <a class="el" href="group__cflib__core.html#gae593ff607f853bd5fc16a16bb6759314" title="Initialize CFLIB Configuration Database and parse possible sources for database entries according to ...">cfinit()</a> that includes error reporting, usage message and (optional) debugging output. On initialization the following data sources are inspected or parsed in the order presented:</li>
</ol>
<ul>
<li>Commandline Arguments (or compatible structure given to <a class="el" href="group__cflib__core.html#gae593ff607f853bd5fc16a16bb6759314" title="Initialize CFLIB Configuration Database and parse possible sources for database entries according to ...">cfinit()</a>) according to the description in <a class="el" href="config_initializer.html#parameter_option">Commandline Option for Parameter</a><ul>
<li>Environment Variables</li>
<li><a class="el" href="config_files.html">Configuration Files</a></li>
<li>Built-in User-defined Default from Configuration Initializer: <a class="el" href="config_initializer.html#parameter_default">Parameter Default Value</a></li>
<li>Get parameter value from Standard Input <code>stdin</code>, if required</li>
</ul>
</li>
</ul>
<ol type="1">
<li>Use the <a class="el" href="cflib.html#retrieval_functions">Retrieval Functions</a> <b>cfget*</b>() to access configuration parameters</li>
</ol>
<ol type="1">
<li>Compile your program, linking the appropriate CFLIB library file for your platform and setup, usually the file name is <em>libcf.a</em> which means the library is referred to as <b>"cf"</b>. You can change the names to fit into your setup: See <a class="el" href="cflib.html#project_homepage">Project Homepage</a> for details.</li>
</ol>
<ol type="1">
<li>Run your program, test CFLIB functionality and adjust the <a class="el" href="config_initializer.html">Configuration Initializer</a> according to your needs</li>
</ol>
<dl class="section see"><dt>See also:</dt><dd><a class="el" href="config_levels.html">Configuration Parsing Levels and Source/Origin Options</a> </dd>
<dd>
<a class="el" href="group__cflib__core.html">Core Features</a></dd></dl>
<h2><a class="anchor" id="simple_example"></a>
Simple Usage Example</h2>
<p>Program: <em>fici.c:</em> Find a File in Path Input: Commandline or Environment Output: File path, Help message or Error message Compile: gcc fifi.c -o fifi -lcf -L../../lib<em>platform</em> Run: ./fifi -h Test: ./fifi gcc</p>
<div class="fragment"><pre class="fragment"><span class="preprocessor"> #include &lt;stdio.h&gt;</span>
<span class="preprocessor"> #include &quot;cf.h&quot;</span>

 <span class="keywordtype">int</span> main( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv )
 {
    <span class="keywordtype">int</span> ret; <span class="keywordtype">char</span> *tmp;

    <a class="code" href="struct__cf.html" title="CFLIB Configuration Database Entry.">CONFIG</a> setting[] =
    {
      <span class="comment">// Name, Default Content, Commandline Option, Special Option Flags</span>
        { <span class="stringliteral">&quot;PROGNAME&quot;</span>, <a class="code" href="group__cflib__core.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4" title="NULL, if not defined.">NULL</a>,        <span class="charliteral">&#39;1&#39;</span>, <a class="code" href="group__special__options__mask.html#ga675b6f8440beecc09fec54d17e9c3ee9" title="Entry is filename to be searched for in the path.">CF_FINDFILE</a>|<a class="code" href="group__special__options__mask.html#ga1b3eb474a5160e5a32385f6de53d90d6" title="Source: Commandline Argument.">CF_SET_ARG</a>|<a class="code" href="group__special__options__mask.html#ga97d17b070dac10c14d3930c58bfba76f" title="Commandline argument not following an option.">CF_NO_OPT_ARG</a>, },
        { <span class="stringliteral">&quot;FF_PATH&quot;</span>,  <a class="code" href="group__cflib__core.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4" title="NULL, if not defined.">NULL</a>,        <span class="charliteral">&#39; &#39;</span>, <a class="code" href="group__special__options__mask.html#gab383c1436888ea6b410141f7c0b1f306" title="Search Path (for FindFile feature)">CF_PATH</a>,                              },
        { <span class="stringliteral">&quot;help&quot;</span>,     <a class="code" href="group__cflib__core.html#ga7010abac2c80c121772da4d9c03332ee" title="Flag is not set.">CF_FLAG_OFF</a>, <span class="charliteral">&#39;h&#39;</span>, <a class="code" href="group__special__options__mask.html#ga1d1f1d1b6eac6b5d9970102318ab2667" title="Entry is Flag.">CF_FLAG</a>|<a class="code" href="group__special__options__mask.html#gaa4d82cea91ede4aee78594417894e368" title="Last entry in settings array.">CF_LAST</a>,                      },
    };

    <span class="keywordflow">if</span> ( !( ret = <a class="code" href="group__cflib__core.html#gadcf24d678203bd09a0a3e05b8a986c65" title="Setup Configuration Database.">cfstart</a>( setting, argc, argv, <span class="stringliteral">&quot;help&quot;</span>, <a class="code" href="group__cflib__core.html#ga3f535ad957f1836dea64deae798324a5" title="Start Mode: Usage message if error was negative, error output like CFS_NEG.">CFS_USG</a> ) ) ){

        <span class="keywordflow">if</span>( ( tmp = <a class="code" href="group__retrieval.html#ga8cf5f53c5b05ec5ca4f5145010f84eb4" title="Inquire CFLIB DB for String in content of named entry.">cfgetstr</a>(<span class="stringliteral">&quot;PROGNAME&quot;</span>) ) != <a class="code" href="group__cflib__core.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4" title="NULL, if not defined.">NULL</a> )

            fprintf( stdout, <span class="stringliteral">&quot;%s\n&quot;</span>, tmp );
    }

    <span class="keywordflow">return</span> ret;
 }
</pre></div><h2><a class="anchor" id="retrieval_functions"></a>
Retrieval Functions</h2>
<ol type="1">
<li>Get CFLIB Version and Copyright Information: <a class="el" href="group__retrieval.html#gac4e376e3630e9b25655ee0e0b1a54a5b" title="Get Library Version/Patchlevel.">cfgetvers()</a>, <a class="el" href="group__retrieval.html#ga160032675def60398ebfd66589ddc1e5" title="Get Library Subversion Details.">cfgetsubvers()</a>, <a class="el" href="group__retrieval.html#ga9999522b2acf8760f420d2567e7f7c50" title="Get Copyright Notice.">cfgetcpr()</a></li>
</ol>
<ol type="1">
<li>Get Usage Message for Output: <a class="el" href="group__retrieval.html#gad3e4e24668cdc111471332a7e79fc897" title="Get Usage Message for (Terminal) Output.">cfgetusg()</a></li>
</ol>
<ol type="1">
<li>Get Configuration Parameter Value:</li>
</ol>
<ul>
<li>Get parameter value: <a class="el" href="group__retrieval.html#ga5e2da3f6cf3e36a910362660d167f790" title="Get value (content) of named entry.">cfget()</a>, interpretation of content and return type depend on the type setting in the parameter's <a class="el" href="group__special__options__mask.html">Special Options Mask</a><ul>
<li>Get string value: <a class="el" href="group__retrieval.html#ga8cf5f53c5b05ec5ca4f5145010f84eb4" title="Inquire CFLIB DB for String in content of named entry.">cfgetstr()</a></li>
<li>Get integer value: <a class="el" href="group__retrieval.html#ga591b741a05205e1ddd599146b996d755" title="Inquire CFLIB DB for Integer value in content of named entry.">cfgetnum()</a></li>
<li>Get real/float value: <a class="el" href="group__retrieval.html#ga5f5ec5179e69c2bdfb06ff38a5af16e4" title="Inquire CFLIB DB for Float (Real) value in content of named entry.">cfgetreal()</a></li>
<li>Inquire flag/switch status: <a class="el" href="group__retrieval.html#gac0188464b59267e14b5c44efb1d4a0f2" title="Inquire CFLIB DB for Flag value in content of named entry.">cfgetflag()</a></li>
<li>Get value of (next) residual command line argument: <a class="el" href="group__retrieval.html#ga6ef6076e946383ab198ee26b9aa5603a" title="Get next Residual Command Line Argument from CFLIB DB.">cfgetres()</a></li>
</ul>
</li>
</ul>
<dl class="section note"><dt>Note:</dt><dd>All of these functions except <a class="el" href="group__retrieval.html#ga6ef6076e946383ab198ee26b9aa5603a" title="Get next Residual Command Line Argument from CFLIB DB.">cfgetres()</a> require the parameter name as argument</dd></dl>
<h2><a class="anchor" id="set_save"></a>
Setting Parameters and Saving the Configuration</h2>
<ul>
<li><a class="el" href="group__setting__saving.html#gab4370bac1e151641bfb78e65f8ec4b44" title="Update or Add Parameter (Utility Function Macro)">cfput()</a> : Update or Add Parameter (Utility Function Macro) </li>
<li><a class="el" href="group__setting__saving.html#ga9553f7a24b080660793a560c2bc8f210" title="Update or Add Parameter name with string content.">cfputstr()</a> : Update or Add Parameter <em>name</em> with string <em>content</em>. </li>
<li><a class="el" href="group__setting__saving.html#ga6f133f88dc253a6a80d13eed4d123063" title="Set all Time and/or Date entries in CFLIB DB to now or today.">cfputtime()</a> : Set all Time and/or Date entries in CFLIB DB to <em>now</em> or <em>today</em>. </li>
<li><a class="el" href="group__setting__saving.html#ga0f6ed90e3ecfa0074af1635a0e4339ef" title="Alter or query the CF_NOSAVE Flag of Parameter name.">cfnosave()</a> : Alter or query the <a class="el" href="group__special__options__mask.html#gad76153c65f68cc0ee5c1a04c8c3e80bf">CF_NOSAVE</a> Flag of Parameter <em>name</em>. </li>
<li><a class="el" href="group__setting__saving.html#ga046d8a68eae35b987eacca04a9a06cca" title="Write configuration data to a Configuration File or stdout.">cfsave()</a> : Write configuration data to a Configuration File or <code>stdout</code>. </li>
</ul>
<ul>
<li>See <a class="el" href="config_files.html">Configuration Files</a> for details</li>
</ul>
<h2><a class="anchor" id="general_utilities"></a>
General Utilities</h2>
<p>These functions and Macros are used in the library but do not depend on the configuration database or any cf*() functions. They are (small) general tools that you can use in your program if you like.</p>
<ul>
<li>String Manipulation: <a class="el" href="group__utilities.html#ga00023e1ae3b25744b3cce3b509e21fe8" title="Set pointer to next non-whitespace-character in string.">EatWhiteSpace()</a>, <a class="el" href="group__utilities.html#ga869ea1081375ada22168696db002bc58" title="String Utility Function.">RemoveCR()</a>, <a class="el" href="group__utilities.html#gabb7b78ca5a077167e24637bba539eea1" title="Strip whitespaces at end of string by introducing zero byte after last non-whitespace character...">RemoveTrailSpace()</a><ul>
<li>File Utilities: <a class="el" href="group__utilities.html#ga59fc2b29cf26051e0854b664f5aed15d" title="Find a File in Path trying Extensions.">FindFile()</a>, <a class="el" href="group__utilities.html#ga0fccda7427db33b2f73a3b6dca864207" title="Copy or Rename File &quot;file&quot; to Backup File &quot;file~&quot; or &quot;file.bak&quot;.">BackupFile()</a></li>
<li>Other Tools: <a class="el" href="group__utilities.html#ga9a90e738d03b642f33901600671d225a" title="Test whether stream is a terminal.">IsATerminal()</a>, <a class="el" href="group__utilities.html#gabfbf02b37e47027916f3352798f7d44c" title="Delete bits of Mask b from Mask a.">DelFlag()</a>, <a class="el" href="group__utilities.html#gafcc4d6e712f81df21ea69277d42af839" title="Set bits of Mask b in Mask a.">SetFlag()</a></li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="advanced"></a>
Advanced Usage</h2>
<h3><a class="anchor" id="error_handling"></a>
Error Handling</h3>
<p>CFLIB maintains a simple global Error Stack that is used by library functions like <a class="el" href="group__cflib__core.html#gae593ff607f853bd5fc16a16bb6759314" title="Initialize CFLIB Configuration Database and parse possible sources for database entries according to ...">cfinit()</a> when multiple errors can occur. Error Items consist of a numeric Error Code and (optionally) an Error Message string. Repeated calls to <a class="el" href="group__errors.html#ga2dc49b60b3ec7a82086e60f4b1c41e18" title="Error Code and Message Inquiry Function.">cfgeterr()</a> will successively return error entries while deleting them from the stack until the list is empty. User programs may also use the CFLIB error stack by calling <a class="el" href="group__errors.html#gaad2687826308f21b54657d2728e4cfcc" title="Init, exit or append to Error List.">cfputerr()</a> without the need to initialize a configuration.</p>
<p>For more details see: <a class="el" href="group__errors.html">Error Handling</a> - Error Codes, Functions and Structures. </p>
<h3><a class="anchor" id="reports"></a>
Report Generation</h3>
<ul>
<li>Generate Output from Template and current parameter values: <a class="el" href="group__report__generation.html#ga2f8350e7d032c87b2a0e1cb6149a85ec" title="Process a Template from file or stdin and write generated Report to File or stdout.">cfform()</a></li>
</ul>
<h3><a class="anchor" id="debugging"></a>
Configuration Debugging</h3>
<p>These functions are thought to be used by the programmer working with CFLIB during development and testing of a program.</p>
<ul>
<li>Dump Configuration DB in human readable form: <a class="el" href="group__advanced__features.html#gaecfc8ee37366e1b36cb5aac0cc41ebdc" title="Dump CFLIB DB content to fout.">cfdump()</a><ul>
<li>Test and Dump Configuration Initializer: <a class="el" href="group__advanced__features.html#ga35e2c28f591ac71e3617c612233ecdd0" title="Debugging Function (experimental)">cfdinichk()</a></li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="metainfos"></a>
Get Information About a Configuration Parameter:</h3>
<ul>
<li>Get source/origin of the parameter's value: <a class="el" href="group__retrieval.html#gadf84eed41bdaa0a6cd8cd474c79d50b1" title="Inquire CFLIB DB for Source of named entry&#39;s content.">cfgetsrc()</a></li>
<li>Inquire Bit from parameter's Special Options Mask by Offset: <a class="el" href="group__retrieval.html#ga09929d4a48932749dd9d0d32d0f3f08c" title="Inquire CFLIB DB for Bit set in entry&#39;s Special Options Fag CONFIG::flag.">cfflaginq()</a></li>
</ul>
<h3><a class="anchor" id="advanced_other"></a>
Other Functions and Features</h3>
<ul>
<li>Exit Configuration: <a class="el" href="group__cflib__core.html#ga47bfff42f432b3e8b5b9f12b695e60db" title="Free allocated memory and reset the configuration database and error stack.">cfexit()</a></li>
<li>Expand User Home Directory in a File Path Parameter: <a class="el" href="group__advanced__features.html#ga469258ed449ac26d5c82e665db491ff2" title="Expand ~ or ~user in parameter content.">cfhomexp()</a></li>
<li>General (internal) retrieval function: <a class="el" href="group__retrieval.html#gac13ba743ed26e6c05df14817ad9df3da" title="Library internal function, use appropriate Macro functions!">cfgetent()</a></li>
</ul>
<h2><a class="anchor" id="compilation_issues"></a>
Compilation and Development Issues</h2>
<p>For information about platforms, binaries, library building and compilation options visit the project homepage <a href="http://cflib.berlios.de!">http://cflib.berlios.de!</a></p>
<p>There you will also find a small example C source module <em>cf_minimal.c</em> that serves as a <b>"minimal replacement"</b> of (all) CFLIB library functions. You can adapt and include the source in your project together with cf.h to completely remove library dependency in case you don't need most of the functionality or if a CFLIB library executable is not available or buildable for your system or setup.</p>
<h2><a class="anchor" id="help"></a>
Help and Support</h2>
<ul>
<li><b>Help</b> is this documentation</li>
<li><b>Support</b> is the (open) source code</li>
<li>The project is maintained from time to time as needed ;-)</li>
<li>Comments, Bug Reports or (better) Bug Fixes are welcome!</li>
<li>See Flexible Configuration Library at <a href="http://cflib.berlios.de">http://cflib.berlios.de</a></li>
<li>... Have Fun! </li>
</ul>
</div></div><!-- contents -->
<hr size="1"><div align="right"><small>documentation generated by
<a href="http://www.doxygen.org/index.html"><strong>doxygen</strong></a> 1.5.8
for <a href="http://cflib.berlios.de"><strong>CFLIB PL 21</strong></a> [2013/03]</small></div>
</body>
</html>
